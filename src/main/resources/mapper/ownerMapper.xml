<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mcp.crispy.employee.mapper.OwnerMapper">

    <!-- 점주 등록 -->
    <insert id="insertOwner" parameterType="OwnerRegisterDto">
        <selectKey keyProperty="empNo" resultType="int" order="BEFORE">
            SELECT EMPLOYEE_SEQ.NEXTVAL
            FROM DUAL
        </selectKey>
        INSERT INTO EMPLOYEE_T (
              EMP_NO
            , EMP_ID
            , EMP_PW
            , EMP_NAME
            , EMP_EMAIL
            , EMP_PHONE
            , EMP_PROFILE
            , POS_NO
            , FRN_NO
        ) VALUES (
              #{empNo}
            , #{empId}
            , #{empPw}
            , #{empName}
            , #{empEmail}
            , #{empPhone}
            , #{empProfile}
            , #{posNo}
            , #{frnNo}
        )
    </insert>

    <!-- 번호에 맞는 직원 호출 -->
    <select id="countByEmpNo"
            parameterType="int" resultType="int">
        SELECT COUNT(*)
        FROM EMPLOYEE_T E
        WHERE 1 = 1
          AND E.EMP_NO = #{empNo}
    </select>

    <!-- 직원 삭제 -->
    <delete id="deleteEmployee">
        DELETE
          FROM EMPLOYEE_T E
         WHERE EMP_NO = #{empNo}
    </delete>

    <!-- 직원 선택 삭제 -->
    <delete id="deleteEmployees">
        DELETE
          FROM EMPLOYEE_T E
         WHERE E.EMP_NO
            IN
        <foreach collection="list" item="empNo" open="(" separator="," close=")">
            #{empNo}
        </foreach>
    </delete>
</mapper>
